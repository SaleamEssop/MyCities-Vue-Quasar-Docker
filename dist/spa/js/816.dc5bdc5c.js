"use strict";(globalThis["webpackChunkcom_smart_meter_reading"]=globalThis["webpackChunkcom_smart_meter_reading"]||[]).push([[816],{2816:(e,a,l)=>{l.r(a),l.d(a,{default:()=>J});l(310),l(6724);var t=l(1758),o=l(8790),s=l(8734),c=l(3394),n=l(4907),u=l(4685);const i={class:"page-content"},d={class:"page-header"},r={class:"page-subtitle"},v={class:"account-actions"},k={key:1,class:"empty-state"},p={class:"detail-row"},m={class:"detail-value"},b={key:0,class:"detail-row"},g={class:"detail-value"},_={class:"detail-row"},f={class:"detail-value"},y={class:"detail-row"},A={class:"detail-value"},F={class:"detail-row"},L={class:"detail-value"},C={class:"detail-row"},h={class:"detail-value"},Q={key:1,class:"detail-row"},q={__name:"AccountsListPage",setup(e){const a=(0,c.rd)(),l=(0,n.A)(),q=(0,s.KR)([]),w=(0,s.KR)(null),W=(0,s.KR)(!1),D=(0,s.KR)(!1),X=()=>{q.value=(0,u.Is)()},I=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"?",V=e=>{const a=(0,u.Ht)();return a&&a.accountId===e},E=e=>e?new Date(e).toLocaleDateString("en-ZA",{day:"numeric",month:"short",year:"numeric"}):"Unknown",N=()=>{a.push({name:"account-setup"})},z=e=>{w.value=e,W.value=!0},x=e=>{a.push({name:"account-edit",params:{accountId:e.id}})},K=()=>{W.value=!1,w.value&&x(w.value)},S=e=>{w.value=e,D.value=!0},T=()=>{if(!w.value)return;const e=(0,u.lw)(w.value.id);e?(l.notify({type:"positive",message:"Account deleted",position:"top"}),X()):l.notify({type:"negative",message:"Failed to delete account",position:"top"}),D.value=!1,w.value=null};return(0,t.sV)(()=>{X()}),(e,a)=>{const l=(0,t.g2)("q-btn"),s=(0,t.g2)("q-avatar"),c=(0,t.g2)("q-item-section"),n=(0,t.g2)("q-badge"),u=(0,t.g2)("q-item-label"),X=(0,t.g2)("q-tooltip"),P=(0,t.g2)("q-item"),R=(0,t.g2)("q-list"),U=(0,t.g2)("q-icon"),B=(0,t.g2)("q-scroll-area"),j=(0,t.g2)("q-space"),H=(0,t.g2)("q-card-section"),Z=(0,t.g2)("q-card-actions"),G=(0,t.g2)("q-card"),J=(0,t.g2)("q-dialog"),M=(0,t.g2)("q-page"),O=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(M,{class:"accounts-list-page"},{default:(0,t.k6)(()=>[(0,t.bF)(B,{class:"page-scroll-area"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",i,[(0,t.Lk)("div",d,[a[2]||(a[2]=(0,t.Lk)("h1",{class:"page-title"},"Accounts",-1)),(0,t.Lk)("p",r,(0,o.v_)(q.value.length)+" account"+(0,o.v_)(1!==q.value.length?"s":""),1)]),(0,t.bF)(l,{color:"primary",icon:"add",label:"Add Account",class:"full-width q-mb-md",onClick:N,"data-test":"accounts-add"}),q.value.length>0?((0,t.uX)(),(0,t.Wv)(R,{key:0,class:"accounts-list",separator:""},{default:(0,t.k6)(()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(q.value,e=>((0,t.uX)(),(0,t.Wv)(P,{key:e.id,class:"account-item"},{default:(0,t.k6)(()=>[(0,t.bF)(c,{avatar:""},{default:(0,t.k6)(()=>[(0,t.bF)(s,{color:e.isDemo?"secondary":"primary","text-color":"white"},{default:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)(I(e.fullName)),1)]),_:2},1032,["color"])]),_:2},1024),(0,t.bF)(c,null,{default:(0,t.k6)(()=>[(0,t.bF)(u,{class:"account-name"},{default:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)(e.fullName)+" ",1),e.isDemo?((0,t.uX)(),(0,t.Wv)(n,{key:0,color:"secondary",label:"Demo",class:"q-ml-sm"})):(0,t.Q3)("",!0),V(e.id)?((0,t.uX)(),(0,t.Wv)(n,{key:1,color:"positive",label:"Active",class:"q-ml-sm"})):(0,t.Q3)("",!0)]),_:2},1024),(0,t.bF)(u,{caption:""},{default:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)(e.email),1)]),_:2},1024),e.company?((0,t.uX)(),(0,t.Wv)(u,{key:0,caption:""},{default:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)(e.company),1)]),_:2},1024)):(0,t.Q3)("",!0)]),_:2},1024),(0,t.bF)(c,{side:""},{default:(0,t.k6)(()=>[(0,t.Lk)("div",v,[(0,t.bF)(l,{flat:"",round:"",icon:"visibility",size:"sm",onClick:a=>z(e),"data-test":"account-view"},{default:(0,t.k6)(()=>[(0,t.bF)(X,null,{default:(0,t.k6)(()=>[...a[3]||(a[3]=[(0,t.eW)("View",-1)])]),_:1})]),_:1},8,["onClick"]),(0,t.bF)(l,{flat:"",round:"",icon:"edit",size:"sm",onClick:a=>x(e),"data-test":"account-edit"},{default:(0,t.k6)(()=>[(0,t.bF)(X,null,{default:(0,t.k6)(()=>[...a[4]||(a[4]=[(0,t.eW)("Edit",-1)])]),_:1})]),_:1},8,["onClick"]),e.isDemo?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(l,{key:0,flat:"",round:"",icon:"delete",size:"sm",color:"negative",onClick:a=>S(e),"data-test":"account-delete"},{default:(0,t.k6)(()=>[(0,t.bF)(X,null,{default:(0,t.k6)(()=>[...a[5]||(a[5]=[(0,t.eW)("Delete",-1)])]),_:1})]),_:1},8,["onClick"]))])]),_:2},1024)]),_:2},1024))),128))]),_:1})):((0,t.uX)(),(0,t.CE)("div",k,[(0,t.bF)(U,{name:"people",size:"64px",color:"grey-5"}),a[6]||(a[6]=(0,t.Lk)("p",null,"No accounts yet",-1)),(0,t.bF)(l,{color:"primary",label:"Create First Account",onClick:N})]))])]),_:1}),(0,t.bF)(J,{modelValue:W.value,"onUpdate:modelValue":a[0]||(a[0]=e=>W.value=e)},{default:(0,t.k6)(()=>[w.value?((0,t.uX)(),(0,t.Wv)(G,{key:0,class:"view-dialog"},{default:(0,t.k6)(()=>[(0,t.bF)(H,{class:"row items-center"},{default:(0,t.k6)(()=>[a[7]||(a[7]=(0,t.Lk)("div",{class:"text-h6"},"Account Details",-1)),(0,t.bF)(j),(0,t.bo)((0,t.bF)(l,{icon:"close",flat:"",round:"",dense:""},null,512),[[O]])]),_:1}),(0,t.bF)(H,null,{default:(0,t.k6)(()=>[(0,t.Lk)("div",p,[a[8]||(a[8]=(0,t.Lk)("span",{class:"detail-label"},"Full Name",-1)),(0,t.Lk)("span",m,(0,o.v_)(w.value.fullName),1)]),w.value.company?((0,t.uX)(),(0,t.CE)("div",b,[a[9]||(a[9]=(0,t.Lk)("span",{class:"detail-label"},"Company",-1)),(0,t.Lk)("span",g,(0,o.v_)(w.value.company),1)])):(0,t.Q3)("",!0),(0,t.Lk)("div",_,[a[10]||(a[10]=(0,t.Lk)("span",{class:"detail-label"},"Email",-1)),(0,t.Lk)("span",f,(0,o.v_)(w.value.email),1)]),(0,t.Lk)("div",y,[a[11]||(a[11]=(0,t.Lk)("span",{class:"detail-label"},"Phone",-1)),(0,t.Lk)("span",A,(0,o.v_)(w.value.phone),1)]),(0,t.Lk)("div",F,[a[12]||(a[12]=(0,t.Lk)("span",{class:"detail-label"},"Timezone",-1)),(0,t.Lk)("span",L,(0,o.v_)(w.value.timezone),1)]),(0,t.Lk)("div",C,[a[13]||(a[13]=(0,t.Lk)("span",{class:"detail-label"},"Created",-1)),(0,t.Lk)("span",h,(0,o.v_)(E(w.value.createdAt)),1)]),w.value.isDemo?((0,t.uX)(),(0,t.CE)("div",Q,[(0,t.bF)(n,{color:"secondary",label:"Demo Account"})])):(0,t.Q3)("",!0)]),_:1}),(0,t.bF)(Z,{align:"right"},{default:(0,t.k6)(()=>[(0,t.bo)((0,t.bF)(l,{flat:"",label:"Close",color:"primary"},null,512),[[O]]),(0,t.bF)(l,{flat:"",label:"Edit",color:"primary",onClick:K})]),_:1})]),_:1})):(0,t.Q3)("",!0)]),_:1},8,["modelValue"]),(0,t.bF)(J,{modelValue:D.value,"onUpdate:modelValue":a[1]||(a[1]=e=>D.value=e)},{default:(0,t.k6)(()=>[(0,t.bF)(G,null,{default:(0,t.k6)(()=>[(0,t.bF)(H,null,{default:(0,t.k6)(()=>[...a[14]||(a[14]=[(0,t.Lk)("div",{class:"text-h6"},"Delete Account?",-1)])]),_:1}),(0,t.bF)(H,null,{default:(0,t.k6)(()=>[(0,t.Lk)("p",null,[a[15]||(a[15]=(0,t.eW)("Are you sure you want to delete the account for ",-1)),(0,t.Lk)("strong",null,(0,o.v_)(w.value?.fullName),1),a[16]||(a[16]=(0,t.eW)("?",-1))]),a[17]||(a[17]=(0,t.Lk)("p",{class:"text-negative"},"This action cannot be undone.",-1))]),_:1}),(0,t.bF)(Z,{align:"right"},{default:(0,t.k6)(()=>[(0,t.bo)((0,t.bF)(l,{flat:"",label:"Cancel",color:"primary"},null,512),[[O]]),(0,t.bF)(l,{flat:"",label:"Delete",color:"negative",onClick:T})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};var w=l(2807),W=l(7716),D=l(8958),X=l(6384),I=l(3999),V=l(124),E=l(5173),N=l(3952),z=l(3796),x=l(3954),K=l(7410),S=l(492),T=l(2156),P=l(3316),R=l(4189),U=l(3676),B=l(2669),j=l(8672),H=l(8582),Z=l.n(H);const G=(0,w.A)(q,[["__scopeId","data-v-bd883822"]]),J=G;Z()(q,"components",{QPage:W.A,QScrollArea:D.A,QBtn:X.A,QList:I.A,QItem:V.A,QItemSection:E.A,QAvatar:N.A,QItemLabel:z.A,QBadge:x.A,QTooltip:K.A,QIcon:S.A,QDialog:T.A,QCard:P.A,QCardSection:R.A,QSpace:U.A,QCardActions:B.A}),Z()(q,"directives",{ClosePopup:j.A})}}]);