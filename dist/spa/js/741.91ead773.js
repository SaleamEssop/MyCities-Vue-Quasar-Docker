"use strict";(globalThis["webpackChunkcom_smart_meter_reading"]=globalThis["webpackChunkcom_smart_meter_reading"]||[]).push([[741],{8741:(e,a,l)=>{l.r(a),l.d(a,{default:()=>J});var t=l(1758),s=l(8790),i=l(9104),r=l(8734),c=l(3394),n=l(4907);const v={class:"header-bar"},u={class:"nav-row"},d={class:"due-badge"},k={class:"period-text"},o={class:"meter-section","data-test":"water-meter-section"},p={class:"meter-type-header"},g={class:"meter-action-links"},L={class:"meter-number"},y={class:"reading-history"},b={class:"reading-row"},m={class:"reading-label"},C={class:"reading-value"},w={key:0,class:"reading-row"},_={key:0,class:"add-reading-link"},R={class:"digit-display-container"},h={class:"digits red"},E={key:0,class:"cursor-blink red"},f={class:"digits black"},K={key:0,class:"cursor-blink"},D={class:"meter-section","data-test":"electricity-meter-section"},A={class:"meter-type-header electricity"},Q={class:"meter-action-links"},X={class:"meter-number"},$={class:"reading-history"},S={class:"reading-row"},N={class:"reading-label"},W={class:"reading-value"},I={key:0,class:"add-reading-link"},q={class:"digit-display-container"},F={class:"digits black"},T={key:0,class:"cursor-blink"},x={key:0,class:"keypad-container","data-test":"keypad"},M={class:"keypad-grid"},P=["data-test","onClick"],z={__name:"EnterReadingsPage",setup(e){const a=(0,c.rd)(),l=(0,c.lq)(),z=(0,n.A)(),H=(0,r.KR)(null),B=(0,r.KR)(null),G=(0,r.KR)(null),V=(0,r.KR)(l.query.type||null),Y=(0,r.KR)(null),j=(0,r.KR)(!1),J=(0,r.KR)(!1),O=(0,r.KR)("132452"),U=(0,r.KR)("10th April"),Z=(0,r.KR)("00140 - 45"),ee=(0,r.KR)(!0),ae=(0,r.KR)(""),le=(0,r.KR)(""),te=(0,r.KR)("98736"),se=(0,r.KR)("10th April"),ie=(0,r.KR)("763456"),re=(0,r.KR)(""),ce=["1","2","3","4","5","6","7","8","9",".","0","backspace"],ne=(0,t.EW)(()=>"17 Apr 2025"),ve=(0,t.EW)(()=>17),ue=(0,t.EW)(()=>"10 Apr 2025"),de=(0,t.EW)(()=>"10 May 2025");(0,t.wB)(V,async e=>{e&&(await(0,t.dY)(),ke())});const ke=()=>{const e="water"===V.value?B.value:G.value;e&&H.value&&e.scrollIntoView({behavior:"smooth",block:"center"})},oe=()=>{V.value?(V.value=null,Y.value=null):a.back()},pe=()=>{V.value="water",Y.value="kiloliters"},ge=()=>{V.value="electricity",Y.value="electricity"},Le=e=>{Y.value=e},ye=e=>{"water"===e?j.value=!j.value:J.value=!J.value},be=e=>{if(Y.value)if("backspace"===e)Ce();else{if("."===e)return;me(e)}},me=e=>{"liters"===Y.value?ae.value.length<2&&(ae.value+=e):"kiloliters"===Y.value?le.value.length<5&&(le.value+=e):"electricity"===Y.value&&re.value.length<6&&(re.value+=e)},Ce=()=>{"liters"===Y.value?ae.value=ae.value.slice(0,-1):"kiloliters"===Y.value?le.value=le.value.slice(0,-1):"electricity"===Y.value&&(re.value=re.value.slice(0,-1))},we=()=>{"water"===V.value?(ae.value="",le.value=""):re.value="",V.value=null,Y.value=null},_e=()=>{let e="";if("water"===V.value){const a=le.value.padStart(5,"0"),l=ae.value.padStart(2,"0");e=`${a}-${l}`}else e=re.value.padStart(6,"0");z.notify({type:"positive",message:`Reading saved: ${e}`,position:"top"}),V.value=null,Y.value=null,a.push({name:"home"})};return(e,a)=>{const l=(0,t.g2)("q-icon"),r=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(r,{class:"enter-readings-page","data-test":"enter-readings-page"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",v,[(0,t.Lk)("span",null,"Current date: "+(0,s.v_)(ne.value),1)]),(0,t.Lk)("div",u,[(0,t.Lk)("button",{class:"nav-arrow",onClick:oe},[...a[5]||(a[5]=[(0,t.Lk)("span",{class:"arrow-icon"},"◀",-1)])]),(0,t.Lk)("div",d," Final Reading due in "+(0,s.v_)(ve.value)+" days ",1),a[6]||(a[6]=(0,t.Lk)("button",{class:"nav-arrow",disabled:""},[(0,t.Lk)("span",{class:"arrow-icon"},"▶")],-1))]),a[13]||(a[13]=(0,t.Lk)("div",{class:"page-title"},"ENTER READINGS",-1)),(0,t.Lk)("div",k,"Period - "+(0,s.v_)(ue.value)+" to "+(0,s.v_)(de.value),1),(0,t.Lk)("div",{class:"content-scroll",ref_key:"contentScrollRef",ref:H},[(0,t.Lk)("div",o,[(0,t.Lk)("div",p,[(0,t.bF)(l,{name:"water_drop",size:"24px",class:"meter-icon"}),a[7]||(a[7]=(0,t.Lk)("span",{class:"meter-type-name"},"Water",-1))]),(0,t.Lk)("div",g,[(0,t.Lk)("a",{href:"#",onClick:(0,i.D$)(pe,["prevent"]),class:(0,s.C4)({active:"water"===V.value})},"Enter reading",2),(0,t.Lk)("a",{href:"#",onClick:a[0]||(a[0]=(0,i.D$)(e=>ye("water"),["prevent"]))},(0,s.v_)(j.value?"Hide Details":"Show Details"),1)]),(0,t.Lk)("div",L,"Meter Number #"+(0,s.v_)(O.value),1),(0,t.Lk)("div",y,[(0,t.Lk)("div",b,[(0,t.Lk)("span",m,"Start Reading "+(0,s.v_)(U.value),1),(0,t.Lk)("span",C,(0,s.v_)(Z.value),1)]),ee.value?((0,t.uX)(),(0,t.CE)("div",w,[...a[8]||(a[8]=[(0,t.Lk)("span",{class:"reading-label"},"Estimated",-1)])])):(0,t.Q3)("",!0)]),"water"!==V.value?((0,t.uX)(),(0,t.CE)("div",_,[(0,t.Lk)("a",{href:"#",onClick:(0,i.D$)(pe,["prevent"])},"Add new reading")])):(0,t.Q3)("",!0),"water"===V.value?((0,t.uX)(),(0,t.CE)("div",{key:1,class:"digit-input-section",ref_key:"waterDigitRef",ref:B},[(0,t.Lk)("div",R,[(0,t.Lk)("div",{class:(0,s.C4)(["digit-group red-group",{active:"liters"===Y.value}]),onClick:a[1]||(a[1]=e=>Le("liters")),"data-test":"water-liters-group"},[(0,t.Lk)("span",h,(0,s.v_)(ae.value||"00"),1),"liters"===Y.value&&""===ae.value?((0,t.uX)(),(0,t.CE)("span",E,"|")):(0,t.Q3)("",!0)],2),a[9]||(a[9]=(0,t.Lk)("span",{class:"digit-separator"},"-",-1)),(0,t.Lk)("div",{class:(0,s.C4)(["digit-group black-group",{active:"kiloliters"===Y.value}]),onClick:a[2]||(a[2]=e=>Le("kiloliters")),"data-test":"water-kiloliters-group"},[(0,t.Lk)("span",f,(0,s.v_)(le.value||"00000"),1),"kiloliters"===Y.value&&""===le.value?((0,t.uX)(),(0,t.CE)("span",K,"|")):(0,t.Q3)("",!0)],2)]),a[10]||(a[10]=(0,t.Lk)("div",{class:"group-labels"},[(0,t.Lk)("span",{class:"group-label red"},"Liters"),(0,t.Lk)("span",{class:"group-label black"},"Kiloliters")],-1))],512)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",D,[(0,t.Lk)("div",A,[(0,t.bF)(l,{name:"bolt",size:"24px",class:"meter-icon"}),a[11]||(a[11]=(0,t.Lk)("span",{class:"meter-type-name"},"Electricity",-1))]),(0,t.Lk)("div",Q,[(0,t.Lk)("a",{href:"#",onClick:(0,i.D$)(ge,["prevent"]),class:(0,s.C4)({active:"electricity"===V.value})},"Enter reading",2),(0,t.Lk)("a",{href:"#",onClick:a[3]||(a[3]=(0,i.D$)(e=>ye("electricity"),["prevent"]))},(0,s.v_)(J.value?"Hide Details":"Show Details"),1)]),(0,t.Lk)("div",X,"Meter Number #"+(0,s.v_)(te.value),1),(0,t.Lk)("div",$,[(0,t.Lk)("div",S,[(0,t.Lk)("span",N,"Start Reading "+(0,s.v_)(se.value),1),(0,t.Lk)("span",W,(0,s.v_)(ie.value),1)])]),"electricity"!==V.value?((0,t.uX)(),(0,t.CE)("div",I,[(0,t.Lk)("a",{href:"#",onClick:(0,i.D$)(ge,["prevent"])},"Add new reading")])):(0,t.Q3)("",!0),"electricity"===V.value?((0,t.uX)(),(0,t.CE)("div",{key:1,class:"digit-input-section",ref_key:"electricityDigitRef",ref:G},[(0,t.Lk)("div",q,[(0,t.Lk)("div",{class:(0,s.C4)(["digit-group black-group single",{active:"electricity"===Y.value}]),onClick:a[4]||(a[4]=e=>Le("electricity")),"data-test":"electricity-group"},[(0,t.Lk)("span",F,(0,s.v_)(re.value||"000000"),1),"electricity"===Y.value&&""===re.value?((0,t.uX)(),(0,t.CE)("span",T,"|")):(0,t.Q3)("",!0)],2)])],512)):(0,t.Q3)("",!0)]),a[12]||(a[12]=(0,t.Lk)("div",{class:"keypad-spacer"},null,-1))],512),V.value?((0,t.uX)(),(0,t.CE)("div",x,[(0,t.Lk)("div",M,[((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(ce,e=>(0,t.Lk)("button",{key:e,class:"keypad-btn","data-test":`keypad-${e}`,onClick:a=>be(e)},(0,s.v_)("backspace"===e?"⌫":e),9,P)),64))]),(0,t.Lk)("div",{class:"keypad-actions"},[(0,t.Lk)("button",{class:"action-btn cancel",onClick:we,"data-test":"keypad-cancel"}," CANCEL "),(0,t.Lk)("button",{class:"action-btn enter",onClick:_e,"data-test":"keypad-enter"}," ENTER ")])])):(0,t.Q3)("",!0)]),_:1})}}};var H=l(2807),B=l(7716),G=l(492),V=l(8582),Y=l.n(V);const j=(0,H.A)(z,[["__scopeId","data-v-70d73532"]]),J=j;Y()(z,"components",{QPage:B.A,QIcon:G.A})}}]);